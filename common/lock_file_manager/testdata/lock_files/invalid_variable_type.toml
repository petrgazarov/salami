# This file is auto-generated by Salami. It is not meant to be edited manually.
version = "0.0.1"

[[target_files_meta]]
file_path = "path/to/target_file_1"
checksum = "e460d56360c0c4d1ff32fd5e5a56eb99"

[[target_files_meta]]
file_path = "path/to/target_file_2"
checksum = "ea441ff260d926a935cf47abf698482d"

[[objects]]
source_file_path = "path/to/source_file"

[objects.parsed_resource]
resource_type = "aws.s3.Bucket"
logical_name = "AssumedRolesBucket"
natural_language = """\
Bucket: assumed-roles
Versioning enabled: True"""
uses = []
exports = { name = "assumed-roles-bucket-name" }
referenced_variables = []

[[objects.code_segments]]
segment_type = "Resource"
content = """\
resource "aws_s3_bucket" "AssumedRolesBucket" {
  bucket = "assumed-roles"
  versioning {
    enabled = true
  }
}"""

[[objects.code_segments]]
segment_type = "Export"
content = """\
output "assumed-roles-bucket-name" {
  value = aws_s3_bucket.AssumedRolesBucket.bucket
}"""

[[objects]]
source_file_path = "path/to/source_file"

[objects.parsed_resource]
resource_type = "aws.s3.BucketPublicAccessBlock"
logical_name = "AssetsPublicAccessBlock"
natural_language = """\
Block public ACLs: True
Block public policy: False
Ignore public ACLs: True
Restrict public buckets: False"""
uses = ["AssumedRolesBucket"]
exports = {}
referenced_variables = []

[[objects.code_segments]]
segment_type = "Resource"
content = """\
resource "aws_s3_bucket_public_access_block" "AssetsPublicAccessBlock" {
  bucket = aws_s3_bucket.AssumedRolesBucket.id

  block_public_acls       = true
  block_public_policy     = false
  ignore_public_acls      = true
  restrict_public_buckets = false
}"""

[[objects]]
source_file_path = "path/to/source_file"

[objects.parsed_resource]
resource_type = "aws.s3.BucketPolicy"
logical_name = "AssumedRolesBucketPolicy"
natural_language = """\
Policy: A JSON policy that allows all principals to perform the "s3:GetObject" action on all objects in the specified S3 bucket."""
uses = ["AssumedRolesBucket"]
exports = {}
referenced_variables = []

[[objects.code_segments]]
segment_type = "Resource"
content = """\
resource "aws_s3_bucket_policy" "AssumedRolesBucketPolicy" {
  bucket = aws_s3_bucket.AssumedRolesBucket.id

  policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action   = "s3:GetObject"
        Effect   = "Allow"
        Resource = "${aws_s3_bucket.AssumedRolesBucket.arn}/*"
        Principal = "*"
      }
    ]
  })
}"""

[[objects]]
source_file_path = "path/to/source_file"

[objects.parsed_variable]
name = "server_container_name"
description = "Server container name"
type = "unsupported"
default = "server-container"

[[objects.code_segments]]
segment_type = "Variable"
content = """\
variable "server_container_name" {
  description = "Server container name"
  type        = string
  default     = "server-container"
}"""
