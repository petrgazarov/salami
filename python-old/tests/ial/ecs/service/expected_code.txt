ecs.Service(
    "CumuliServerEcsService",
    name="cumuli-server",
    cluster=cumuli_ecs_cluster.arn,
    task_definition=cumuli_server_task_definition.arn,
    desired_count=1,
    launch_type="FARGATE",
    network_configuration={
        "assign_public_ip": True,
        "subnets": [public_subnet_a.id, public_subnet_b.id],
        "security_groups": [cumuli_server_ecs_security_group.id],
    },
    load_balancers=[
        {
            "target_group_arn": cumuli_server_target_group.arn,
            "container_name": server_container_name,
            "container_port": container_port,
        }
    ],
    deployment_controller={"type": "ECS"},
    deployment_circuit_breaker={"enable": True, "rollback": True},
    wait_for_steady_state=True,
)
